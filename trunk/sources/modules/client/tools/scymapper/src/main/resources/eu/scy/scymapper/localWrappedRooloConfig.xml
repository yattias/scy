<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"
	   default-autowire="byName">

	<alias name="wrappedRepository" alias="repository"/>
	<alias name="localMetadataTypeManager" alias="metadataTypeManager"/>
	<alias name="localExtensionManager" alias="extensionManager"/>
	<alias name="localEloFactory" alias="eloFactory"/>
	<alias name="httpInvokerPedagogicalPlanServiceProxy" alias="pedagogicalPlanService"/>

	<bean name="wrappedRepository" class="eu.scy.client.desktop.scydesktop.hacks.RepositoryWrapper">
		<property name="repository" ref="localRepository"/>
		<property name="metadataTypeManager" ref="localMetadataTypeManager"/>
		<property name="sendEloSavedEvents" value="true"/>
	</bean>

	<bean name="localRepository" class="roolo.cms.repository.mock.MockRepository" init-method="initialise">
		<property name="metadataTypeManager" ref="localMetadataTypeManager"/>
		<property name="extensionManager" ref="localExtensionManager"/>
		<property name="eloStoreDirectory" value="eloStore"/>
		<property name="storeElosInStoreDirectory" value="true"/>
	</bean>

	<import resource="localRooloMetadata.xml"/>
	<import resource="localRooloExtensions.xml"/>

	<bean name="localEloFactory" class="roolo.elo.JDomBasicELOFactory">
		<constructor-arg index="0" ref="metadataTypeManager"/>
	</bean>

	<bean id="actionlogger" class="eu.scy.actionlogging.logger.ActionLogger"/>

	<bean id="awarenessService" class="eu.scy.awareness.impl.AwarenessServiceXMPPImpl"/>

	<bean id="dataSyncService" class="eu.scy.client.common.datasync.DataSyncService"/>

	<bean id="notificationReceiver" class="eu.scy.client.notification.NotificationReceiver"/>

	<bean id="httpInvokerPedagogicalPlanServiceProxy"
		  class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
		<property name="serviceUrl">
			<value>
				http://${serverName}:${httpPort}/${contextPath}/remoting/pedagogicalPlan-httpinvoker
			</value>
		</property>
		<property name="serviceInterface">
			<value>eu.scy.server.pedagogicalplan.PedagogicalPlanService</value>
		</property>
	</bean>
</beans>
