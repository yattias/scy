<?xml version="1.0" encoding="utf-8"?> 
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
		   xmlns:s="library://ns.adobe.com/flex/spark" 
		   xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:local="*">
	
	<fx:Script>
		<![CDATA[
			import listeners.ToggleEvent;
			
			import mx.events.FlexEvent;
			import mx.events.IndexChangedEvent;
			
			private var currentlySelectedTab:Number = 0;
			
			protected function clickHandler(dir:String, stack:Number):void {
				var tEvent:ToggleEvent = new ToggleEvent(index.TOGGLE_COMMAND, true);
				tEvent.direction = dir;
				tEvent.selecTarget = stack;
				dispatchEvent(tEvent);
			}

			private function retrieveUserInfos():String {
				var so:SharedObject = SharedObject.getLocal(index.SHAREDOBJECT_LOCAL_NAME);
				var userInfo:Object = so.data.userInfo;
				return (userInfo.firstname as String).toLowerCase();
			}
			
			public function refresh():void {
				(gallery.getChildAt(currentlySelectedTab) as elosPane).refresh();
				
			}


			protected function gallery_changeHandler(event:IndexChangedEvent):void {
				currentlySelectedTab = event.newIndex;
				refresh();
			}

		]]>
	</fx:Script>
	
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		@namespace reflector "com.rictus.reflector.*";
		
		.customAccordionHeadStyles {
			skin: ClassReference("skins.CustomAccordionHeaderSkin");
		}
	</fx:Style>
	
	<s:VGroup gap="10" width="100%" height="100%" horizontalAlign="center">
		<s:HGroup width="100%" height="70" horizontalAlign="center" verticalAlign="middle" gap="3">
			<s:BorderContainer id="headerLogo" width="70" height="70" borderStyle="solid" borderColor="{index.THEME_COL}">
				<s:backgroundFill>
					<s:LinearGradient rotation="90">
						<s:GradientEntry color="{index.THEME_COL}" />
						<s:GradientEntry color="{index.THEME_COL}" />
					</s:LinearGradient>
				</s:backgroundFill>
				
				<s:Image source="{index.IMAGE_BASE_URL+'assets/images/feed.png'}" width="60" height="60" left="5" top="5" />
			</s:BorderContainer>	
			<s:BorderContainer id="header" width="100%" height="70" borderStyle="solid" borderColor="{index.THEME_COL}">
				<s:backgroundFill>
					<s:LinearGradient rotation="90">
						<s:GradientEntry color="{index.THEME_COL}" />
						<s:GradientEntry color="{index.THEME_COL}" />
					</s:LinearGradient>
				</s:backgroundFill>
				
				<s:HGroup width="100%" height="100%" horizontalAlign="center" verticalAlign="middle">
					<s:Label id="headerText" width="60%" color="{index.BACK_GRADIENT_BOT}" fontSize="15" textAlign="center" text="{resourceManager.getString('resources', 'HELLO')}" />
				</s:HGroup>
			</s:BorderContainer>	
		</s:HGroup>
		
		<s:HGroup id="selectionBox" width="100%" gap="0">
			<s:HGroup id="selec" width="50%" height="100%" gap="10" verticalAlign="middle">
				<mx:Spacer width="10" />
				<s:Label width="100%" text="{resourceManager.getString('resources', 'MISSION')+': '+index.MISSION_NAME}" color="{index.THEME_COL}" />
			</s:HGroup>
		</s:HGroup>

		<s:BorderContainer width="{hbo.width}" minHeight="10" borderColor="{index.THEME_COL}">
			<s:HGroup left="2" top="2" right="2" bottom="2" verticalAlign="middle">
				<mx:Image source="assets/images/inf.png" width="10" height="10" />
				<s:Label id="instruc" width="100%" height="13" text="{resourceManager.getString('resources', 'INTRO_INSTRUC')}" verticalAlign="middle" color="{index.THEME_COL}" />
			</s:HGroup>
		</s:BorderContainer>
		<s:VGroup id="hbo" width="95%" height="100%" horizontalCenter="0">
			<mx:Accordion id="gallery" width="100%" height="100%" borderAlpha=".5" change="gallery_changeHandler(event)" borderColor="{index.THEME_COL}" creationPolicy="all" contentBackgroundAlpha=".3" contentBackgroundColor="{index.THEME_LIGHT}" historyManagementEnabled="true" color="#FFFFFF" headerStyleName="customAccordionHeadStyles">
				<local:elosPane label="{resourceManager.getString('resources', 'ACCORD_CAT1')}" width="100%" height="100%" category="{index.CAT1}"/>
				<local:elosPane label="{resourceManager.getString('resources', 'ACCORD_CAT2')}" width="100%" height="100%" category="{index.CAT2}"/>
				<local:elosPane label="{resourceManager.getString('resources', 'ACCORD_CAT3')}" width="100%" height="100%" category="{index.CAT3}"/>
			</mx:Accordion>
		</s:VGroup>
		<mx:Spacer height="15" />
	</s:VGroup>
</s:NavigatorContent>
