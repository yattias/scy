<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
					  xmlns:s="library://ns.adobe.com/flex/spark" 
					  xmlns:mx="library://ns.adobe.com/flex/mx" width="200" height="250" buttonMode="true"
					  horizontalAlign="center" gap="1">
	<fx:Script>
		<![CDATA[
			import listeners.ToggleEvent;
			
			import mx.collections.ArrayCollection;
			import mx.core.FlexGlobals;
			import mx.events.FlexEvent;
			
			import utility.AutoSaveService;
			import utility.XMLUtilJer;
			[Bindable] public var uri:String = "";
			[Bindable] public var catname:String = "";
			[Bindable] public var createdby:String = "";
			[Bindable] public var thumbnail:String = "";
			[Bindable] public var fullsize:String = "";
			[Bindable] public var customname:String = "";
			[Bindable] public var modified:String = "";
			[Bindable] public var studentdescription:String = "";
			[Bindable] public var studentglg:ArrayCollection;
			[Bindable] public var studentslg:ArrayCollection;
			[Bindable] public var studentreflection:String = "";
			[Bindable] public var hasbeenselectedforsubmit:Boolean = false;
			[Bindable] public var hasbeenreflectedon:Boolean = false;
			[Bindable] public var studentinquiry:String = "";
			[Bindable] public var inquiryquestion:String = "";
			[Bindable] public var assessed:String = "";
			[Bindable] public var grade:String = "";
			[Bindable] public var assessmentcomment:String = "";
			[Bindable] public var reflectioncomment:String = "";
			[Bindable] public var shouldBeSelected:Boolean = false;
			[Bindable] public var technicalformat:String = "";
			[Bindable] public var rawdataid:String = "";
			[Bindable] public var rawdatatext:String = "";
			[Bindable] public var rawdatathumb:String = "";
			[Bindable] public var rawdatafull:String = "";
			[Bindable] public var rawdatadataset:String = "";
			[Bindable] public var shown:String;
			[Bindable] public var eval:String;
			[Bindable] public var score:String;
			[Bindable] public var feedbackelourl:String;
			[Bindable] public var rawObject:Object;
	
			protected function bordercontainer1_mouseOverHandler(event:MouseEvent):void {
				event.target.alpha = .7;
			}

			protected function bordercontainer1_mouseOutHandler(event:MouseEvent):void {
				event.target.alpha = 1;
			}

			protected function bordercontainer1_mouseDownHandler(event:MouseEvent):void {
				var tEvent:ToggleEvent = new ToggleEvent(index.TOGGLE_COMMAND, true);
				tEvent.direction = index.LEFT_DIRECTION;
				tEvent.selecTarget = index.STACK_FEEDBACK_PANEL;
				tEvent.eloToAssess = rawObject;
				dispatchEvent(tEvent);
				
				var so:SharedObject = SharedObject.getLocal(index.SHAREDOBJECT_LOCAL_NAME);
				var sLogger:Dictionary = new Dictionary();
				sLogger["tool"] = index.SHAREDOBJECT_LOCAL_NAME;
				sLogger["type"] = "elo_clicked";
				sLogger["elouri"] = new String(FlexGlobals.topLevelApplication.parameters.missionURI);
				var attribs:ArrayCollection = new ArrayCollection();
				var ob:Object = new Object();
				ob.oName = "eloWithFeedbackSelected";
				ob.oVal = uri;
				attribs.addItem(ob);
				new AutoSaveService(so.data.actionlogger+"?&logaction="+encodeURI(XMLUtilJer.getXMLActionLoggerObject(sLogger, attribs)));
			}

			protected function thumb_ioErrorHandler(event:IOErrorEvent):void {
				switch(event.errorID) {
					case 0:
						rawdatathumb = index.NOTHUMB;
						break;
				}
			}

		]]>
	</fx:Script>
	<!--
	<s:BorderContainer id="cat" width="100%" height="25" backgroundColor="{index.THEME_COL}" borderColor="{index.THEME_LIGHT}" borderWeight="2" toolTip="{resourceManager.getString('resources', 'TOOLTIP_TABLE_CATEGORY')}"
					   mouseOver="bordercontainer1_mouseOverHandler(event)"
					   mouseOut="bordercontainer1_mouseOutHandler(event)"
					   mouseChildren="false">
		<s:VGroup width="100%" height="100%" verticalAlign="middle" horizontalAlign="center">
			<s:Label id="titleLabel" text="{catname}" color="#FFFFFF" />
		</s:VGroup>
	</s:BorderContainer>
	-->
	<s:BorderContainer id="elo" width="100%" height="100%" backgroundColor="{index.THEME_COL}" borderColor="{index.THEME_LIGHT}" borderWeight="2" toolTip="{resourceManager.getString('resources', 'TOOLTIP_TABLE_ELO')}"
					   mouseOver="bordercontainer1_mouseOverHandler(event)"
					   mouseOut="bordercontainer1_mouseOutHandler(event)"
					   mouseChildren="false"
					   mouseDown="bordercontainer1_mouseDownHandler(event)">
		<s:VGroup left="5" top="5" right="5" bottom="5" gap="0">
			<s:Group width="100%" height="110" horizontalCenter="0">
				<s:Rect width="100%" height="100%">
					<s:fill>
						<s:SolidColor color="#FFCC99" alpha=".5" />
					</s:fill>
				</s:Rect>
				<s:Image id="thumb" source="{rawdatathumb}" width="100" height="100" horizontalCenter="0" verticalCenter="0" ioError="thumb_ioErrorHandler(event)" />
 			</s:Group>
			<mx:Spacer height="3" />
			<s:Label color="#333333" text="{customname}" width="100%" fontWeight="bold" />
			<mx:Spacer height="3" />
			<s:Label color="#333333" text="{resourceManager.getString('resources', 'CATEGORY')+': '+catname}" width="100%" />
			<mx:Spacer height="3" />
			<s:Label color="#333333" text="{resourceManager.getString('resources', 'BY')+': '+createdby}" width="100%" />
			<mx:Spacer height="3" />
			<s:Label color="#333333" text="{resourceManager.getString('resources', 'DATE')+': '+modified}" width="100%" />
			<mx:Spacer height="3" />
			<s:Label color="#333333" text="{resourceManager.getString('resources', 'SHOWN')+': '+shown+' / '+resourceManager.getString('resources', 'EVALUATED')+': '+eval+' / '+resourceManager.getString('resources', 'SCORE')+': '+score}" width="100%" />
		</s:VGroup>
	</s:BorderContainer>
</s:VGroup>
