<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="220" height="230" verticalScrollPolicy="off" horizontalScrollPolicy="off" borderStyle="none" horizontalGap="0">
	
	<fx:Declarations>
		<s:Fade id="fadeOut" alphaFrom="1" alphaTo="0" duration="1000"  target="{optionsCanvas}" />
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import listeners.DeleteEvent;
			import listeners.ToggleEvent;
			
			import mx.controls.Alert;
			import mx.events.CloseEvent;
			
			private var hideInter:Number;
			
			[Bindable] public var eloIndex:Number;
			[Bindable] public var attachedElo:Object;
			
			public function slideDeleteBox():void {
				clearInterval(hideInter);
				optionsCanvas.alpha = 1;
				hideInter = setInterval(hideDeleteBar, 3000);
			}
			
			private function hideDeleteBar():void {
				clearInterval(hideInter);
				fadeOut.play();
			}
			
			private function alertListener(event:CloseEvent):void {
				if(event.detail == Alert.YES) {
					var delEvt:DeleteEvent = new DeleteEvent(Main.DELETE_COMMAND, true);
					delEvt.selecIndex = eloIndex;
					dispatchEvent(delEvt);
				}
			}
			
			protected function deleteCanvas_clickHandler(event:MouseEvent):void {
				Alert.show("Do you really want to delete this ELO", "Delete ELO", 3, null, alertListener);
			}

			protected function editHandler(event:MouseEvent):void {
				Alert.show("Do you want to edit this ELO", "Edit ELO", 3, null, editalertListener);
			}
			
			private function editalertListener(event:CloseEvent):void {
				if(event.detail == Alert.YES) {
					var so:SharedObject = SharedObject.getLocal("scy-eportfolio");
					so.data.searchSelection = attachedElo;
					so.flush();
					
					var tEvent:ToggleEvent = new ToggleEvent(Main.TOGGLE_COMMAND, true);
					tEvent.direction = Main.LEFT_DIRECTION;
					tEvent.selecTarget = Main.STACK_REFLEC_PANEL;
					tEvent.editReflection = true;
					tEvent.eloToAdd = false;
					dispatchEvent(tEvent);
					
					var delEvt:DeleteEvent = new DeleteEvent(Main.DELETE_COMMAND, true);
					delEvt.selecIndex = eloIndex;
					delEvt.needsRefreshing = false;
					dispatchEvent(delEvt);
				}
			}

		]]>
	</fx:Script>
	
	<mx:VBox width="20" alpha="0" id="optionsCanvas">
		<mx:Canvas width="100%" height="20" click="deleteCanvas_clickHandler(event)" mouseChildren="false" buttonMode="true">
			<mx:Image source="assets/images/del.png" width="20" height="20" />
		</mx:Canvas>
		<mx:Canvas width="100%" height="20" click="editHandler(event)" mouseChildren="false" buttonMode="true">
			<mx:Image source="assets/images/edit.png" width="20" height="20" />
		</mx:Canvas>
	</mx:VBox>
</mx:HBox>
